# 0B703-勇哥招亲组-构建主机端开发环境(下)

小组名称：勇哥招亲组  
小组成员：罗颖彪、杜嘉卓、赵勇

- [一、实验目的](#jump1)
- [二、实验内容](#jump2)
- [三、实验过程与结果](#jump3)
- [四、实验总结](#jump4)
- [五、附实验源码](#jump5)

## <span id="jump1">一、实验目的</span>
1. 学会下载安装Linux及相关工具到目标机或目标机仿真环境。
2. 学会使用交叉编译器编译应用程序，并能够将可执行程序下载到目标机运行。
3. 学会使用交叉调试工具gdb-gdbserver调试应用程序。

## <span id="jump2">二、实验内容</span>

* Host-Target方案1:下载安装Linux系统到开发板，其中包括bootloader、内核、模块、库、文件系统等;建立host-target连接，常见连接有SSH，VNC，Putty。
* Host-Target方案2:下载安装目标机仿真环境qemu，安装qemu树莓派系统。
* 构建并测试开发板交叉编译器。
* 建立gdb-gdbserver交叉调试环境并能够调试应用程序。

## <span id="jump3">三、实验过程与结果</span>

### 3.1 安装目标端环境
在树莓派上安装Raspbain系统即可。

### 3.2 gdb-gdbserver交叉调试

1. 在主机端（Ubuntu）构建交叉编译工具链：
```bash
git clone git://github.com/raspberrypi/tools.git
```
![image](./image/1.jpg)

2. 把编译器路径加入到系统环境变量:
```bash
exportPATH=$PATH:$HOME/rasppi/tools/arm-bcm2708/gcc-
linaro-arm-linux-gnueabihf-raspbian-x64/bin
```
![image](./image/2.jpg)

3. 使用arm-linux-gnueabihf-gcc编译测试程序:
```bash
arm-linux-gnueabihf-gcc -g test.c -o test
```

4. 在目标端（树莓派）安装gdbserver:
```bash
sudo apt-get install gdbserver
```

5. gdb-gdbserver交叉调试:


## <span id="jump4">四、实验总结</span>

### 4.1 实验收获
✅

### 4.2 未解决问题
✅已解决：因为主机端是64位，安装的toolchain版本应该是`tools/arm-bcm2708/gcc-
linaro-arm-linux-gnueabihf-raspbian-x64/bin`下的执行文档。使用`tools/arm-bcm2708/gcc-
linaro-arm-linux-gnueabihf-raspbian/bin`不能成功编译。

## <span id="jump5">五、附实验源码</span>
✅见[code](./code)文件夹
